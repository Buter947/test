<div id="jhs-kanji-quiz-v1">
    <style>
        /* --- CSS 樣式 (與 V3.6 完全相同) --- */
        #jhs-kanji-quiz-v1 {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !important;
            line-height: 1.6 !important;
            background-color: #f9fafb !important;
            border: 1px solid #e5e7eb !important;
            border-radius: 0.75rem !important;
            padding: 2rem !important;
            margin: 2rem auto !important;
            max-width: 700px !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05) !important;
            overflow: hidden;
        }
        #jhs-kanji-quiz-v1 *, 
        #jhs-kanji-quiz-v1 *::before, 
        #jhs-kanji-quiz-v1 *::after {
            box-sizing: border-box !important;
        }
        #jhs-kanji-quiz-v1 .jhs-kq-screen { display: none; animation: fadeInJhsKqV1 0.3s ease-in-out !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-screen.active { display: block !important; }
         @keyframes fadeInJhsKqV1 { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        #jhs-kanji-quiz-v1 h2 { color: #059669 !important; text-align: center !important; font-size: 2rem !important; font-weight: 700 !important; margin-top: 0 !important; margin-bottom: 0.5rem !important; }
        #jhs-kanji-quiz-v1 h3 { text-align: center !important; font-size: 1.5rem !important; font-weight: 700 !important; margin-top: 0 !important; margin-bottom: 1.5rem !important; color: #1f2937 !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-subtitle { text-align: center !important; font-size: 1.1rem !important; color: #4b5563 !important; margin: 0 auto 2rem auto !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-main-btn { display: block !important; width: 100% !important; max-width: 300px !important; margin: 2rem auto 0 auto !important; padding: 1rem !important; font-size: 1.25rem !important; font-weight: 700 !important; color: #ffffff !important; background-color: #059669 !important; border: none !important; border-radius: 0.5rem !important; cursor: pointer !important; transition: background-color 0.2s, transform 0.1s !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-main-btn:hover { background-color: #047857 !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-main-btn:active { transform: scale(0.98) !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-level-grid { display: grid !important; grid-template-columns: 1fr 1fr !important; gap: 1rem !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-level-btn { width: 100% !important; padding: 1.5rem 0.5rem !important; font-size: 1.1rem !important; font-weight: 600 !important; color: #374151 !important; background-color: #ffffff !important; border: 1px solid #d1d5db !important; border-radius: 0.5rem !important; cursor: pointer !important; transition: all 0.2s ease !important; text-align: center; display: flex !important; flex-direction: column !important; justify-content: center !important; align-items: center !important; min-height: 100px !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-level-btn:hover { border-color: #059669 !important; color: #059669 !important; transform: translateY(-2px) !important; box-shadow: 0 4px 6px rgba(0,0,0,0.05) !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-level-btn small { font-size: 0.8rem; color: #6b7280; display: block; font-weight: 400; margin-top: 0.25rem; }
        #jhs-kanji-quiz-v1 .jhs-kq-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; color: #4a5568; font-weight: 600; }
        #jhs-kanji-quiz-v1 .jhs-kq-counter { font-size: 1rem; font-weight: 600; color: #6b7280; }
        #jhs-kanji-quiz-v1 .jhs-kq-question-display { font-size: 4.5rem !important; font-weight: 700 !important; color: #111827 !important; text-align: center; background-color: #ffffff; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 2.5rem 1.5rem; margin-bottom: 2rem; min-height: 200px; display: flex; justify-content: center; align-items: center; font-family: 'Kyokasho', 'Yu Mincho', 'Hiragino Mincho ProN', serif !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-options-grid { display: grid !important; grid-template-columns: 1fr 1fr !important; gap: 1rem !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-option-btn { width: 100% !important; padding: 1rem !important; font-size: 1.25rem !important; font-weight: 600 !important; color: #374151 !important; background-color: #ffffff !important; border: 1px solid #d1d5db !important; border-radius: 0.5rem !important; cursor: pointer !important; transition: all 0.2s ease !important; text-align: center; min-height: 80px; display: flex; justify-content: center; align-items: center; }
        #jhs-kanji-quiz-v1 .jhs-kq-option-btn:not(:disabled):hover { border-color: #059669 !important; color: #059669 !important; transform: translateY(-2px) !important; box-shadow: 0 4px 6px rgba(0,0,0,0.05) !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-option-btn:disabled { cursor: not-allowed; opacity: 0.7; }
        #jhs-kanji-quiz-v1 .jhs-kq-option-btn.correct { background-color: #dcfce7 !important; border-color: #16a34a !important; color: #15803d !important; font-weight: 700 !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-option-btn.wrong { background-color: #fee2e2 !important; border-color: #dc2626 !important; color: #b91c1c !important; opacity: 1 !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-feedback-box { display: none; background-color: #ffffff; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; margin-top: 1.5rem; text-align: center; animation: fadeInJhsKqV1 0.3s ease-in-out !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-feedback-text { font-size: 1.5rem; font-weight: 700; margin: 0 0 1rem 0; }
        #jhs-kanji-quiz-v1 .jhs-kq-feedback-text.correct { color: #16a34a; }
        #jhs-kanji-quiz-v1 .jhs-kq-feedback-text.wrong { color: #dc2626; }
        #jhs-kanji-quiz-v1 .jhs-kq-answer-reveal { font-size: 1.25rem; font-weight: 700; color: #1f2937; }
        #jhs-kanji-quiz-v1 .jhs-kq-next-btn { display: none; width: 100%; background-color: #0284c7 !important; margin: 1.5rem auto 0 auto; max-width: 300px; }
        #jhs-kanji-quiz-v1 .jhs-kq-next-btn:hover { background-color: #0369a1 !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-score-display { font-size: 1.5rem; font-weight: 600; color: #1f2937; text-align: center; }
        #jhs-kanji-quiz-v1 .jhs-kq-score-display .score { font-size: 3rem; font-weight: 700; color: #059669; display: block; margin: 0.5rem 0; }
        #jhs-kanji-quiz-v1 .jhs-kq-controls-box { display: flex; flex-direction: column; gap: 1rem; max-width: 300px; margin: 2rem auto 0 auto; }
        #jhs-kanji-quiz-v1 .jhs-kq-controls-box .jhs-kq-main-btn { margin-top: 0 !important; background-color: #059669 !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-controls-box .jhs-kq-main-btn:hover { background-color: #047857 !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-controls-box .jhs-kq-secondary-btn { background-color: #ffffff !important; color: #374151 !important; border: 1px solid #d1d5db !important; }
        #jhs-kanji-quiz-v1 .jhs-kq-controls-box .jhs-kq-secondary-btn:hover { background-color: #f9fafb !important; }
        @media (max-width: 600px) { #jhs-kanji-quiz-v1 { padding: 1.5rem !important; margin: 1rem auto !important; } #jhs-kanji-quiz-v1 h2 { font-size: 1.75rem !important; } #jhs-kanji-quiz-v1 .jhs-kq-question-display { font-size: 3.5rem !important; } }
        @media (max-width: 480px) { #jhs-kanji-quiz-v1 .jhs-kq-options-grid { grid-template-columns: 1fr !important; } #jhs-kanji-quiz-v1 .jhs-kq-level-grid { grid-template-columns: 1fr 1fr !important; } }
    </style>

    <div class="jhs-kq-card">
        <div id="jhs-kq-screen-start" class="jhs-kq-screen active"> /* ... */ </div>
        <div id="jhs-kq-screen-quiz" class="jhs-kq-screen"> /* ... */ </div>
        <div id="jhs-kq-screen-end" class="jhs-kq-screen"> /* ... */ </div>
         <div class="jhs-kq-card">
            
            <div id="jhs-kq-screen-start" class="jhs-kq-screen active">
                <h2>中学生漢字クイズ</h2>
                <p class="jhs-kq-subtitle">挑戦する学年を選んでください。</p>
                <div id="jhs-kq-level-grid" class="jhs-kq-level-grid">
                    </div>
            </div>

            <div id="jhs-kq-screen-quiz" class="jhs-kq-screen">
                <div class="jhs-kq-header">
                     <span id="jhs-kq-question-counter" class="jhs-kq-counter"></span>
                     <span id="jhs-kq-score-counter" class="jhs-kq-counter"></span>
                </div>
                <div id="jhs-kq-question-display" class="jhs-kq-question-display"></div>
                <div id="jhs-kq-options-grid" class="jhs-kq-options-grid"></div>
                
                <button id="jhs-kq-next-btn" class="jhs-kq-main-btn jhs-kq-next-btn">次の問題へ</button>
                <div id="jhs-kq-feedback-box" class="jhs-kq-feedback-box">
                     <h3 id="jhs-kq-feedback-text" class="jhs-kq-feedback-text"></h3>
                     <div id="jhs-kq-answer-reveal" class="jhs-kq-answer-reveal"></div>
                </div>
            </div>

            <div id="jhs-kq-screen-end" class="jhs-kq-screen">
                <h3>お疲れ様でした！</h3>
                <div class="jhs-kq-score-display">
                    あなたのスコア:
                    <span id="jhs-kq-final-score" class="score">10問中 0問</span>
                    正解
                </div>
                <div id="jhs-kq-controls-box" class="jhs-kq-controls-box">
                    <button id="jhs-kq-restart-btn" class="jhs-kq-main-btn">もう一度挑戦する</button>
                    <button id="jhs-kq-menu-btn" class="jhs-kq-main-btn jhs-kq-secondary-btn">学年選択に戻る</button>
                </div>
            </div>
        </div>

    </div>

<script>
// 規範 1.3 & 1.6：使用 DOMContentLoaded 和 IIFE
document.addEventListener('DOMContentLoaded', function() {
    (function() {

        /**
         * JhsKanjiQuiz (中学生漢字クイズ) V1.3 (Expanded common_errors)
         */
        const JhsKanjiQuiz = {
            // --- 1. 數據庫 ---
            // ==========================================================
            //   極重要警告 / VERY IMPORTANT WARNING:
            //   g7, g8, g9 的數據仍為 AI 生成填充，*必須* 由用戶核對修正！
            //   common_errors 數據基於用戶提供的圖片，但仍建議最終校對。
            // ==========================================================
            quizData: {
'g7': { // 中學1年生 (317 字)
                    name: '中学1年生<small>(全 317 字)</small>', 
                    data: [
                        // 請在此處填入您核對過的 317 個中一漢字和讀音
                        // 以下為 AI 生成的範例，*需要核對修正*
                        {q:'陛',a:'へい'}, {q:'禅',a:'ぜん'}, {q:'禍',a:'か'}, {q:'禎',a:'てい'}, {q:'福',a:'ふく'}, 
                        {q:'秀',a:'しゅう'}, {q:'秋',a:'あき'}, {q:'秩',a:'ちつ'}, {q:'称',a:'しょう'}, {q:'稲',a:'いね'}, 
                        {q:'穀',a:'こく'}, {q:'積',a:'せき'}, {q:'穏',a:'おだやか'}, {q:'穣',a:'じょう'}, {q:'穫',a:'かく'}, 
                        {q:'穂',a:'ほ'}, {q:'籍',a:'せき'}, {q:'節',a:'せつ'}, {q:'範',a:'はん'}, {q:'築',a:'ちく'}, 
                        {q:'篤',a:'とく'}, {q:'簡',a:'かん'}, {q:'簿',a:'ぼ'}, {q:'籍',a:'せき'}, {q:'米',a:'こめ'}, 
                        {q:'粉',a:'こな'}, {q:'粗',a:'そ'}, {q:'粘',a:'ねん'}, {q:'粛',a:'しゅく'}, {q:'粟',a:'あわ'}, 
                        {q:'粥',a:'かゆ'}, {q:'糧',a:'かて'}, {q:'糾',a:'きゅう'}, {q:'紀',a:'き'}, {q:'約',a:'やく'}, 
                        {q:'紅',a:'べに'}, {q:'紋',a:'もん'}, {q:'納',a:'おさめる'}, {q:'純',a:'じゅん'}, {q:'紗',a:'しゃ'}, 
                        {q:'紙',a:'かみ'}, {q:'級',a:'きゅう'}, {q:'紛',a:'ふん'}, {q:'素',a:'そ'}, {q:'紡',a:'つむぐ'}, 
                        {q:'索',a:'さく'}, {q:'紫',a:'むらさき'}, {q:'累',a:'るい'}, {q:'細',a:'ほそい'}, {q:'紳',a:'しん'}, 
                        {q:'紹',a:'しょう'}, {q:'紺',a:'こん'}, {q:'終',a:'おわる'}, {q:'組',a:'くむ'}, {q:'結',a:'むすぶ'}, 
                        {q:'絶',a:'たえる'}, {q:'絞',a:'しぼる'}, {q:'絡',a:'からむ'}, {q:'給',a:'きゅう'}, {q:'統',a:'とう'}, 
                        {q:'糸',a:'いと'}, {q:'絹',a:'きぬ'}, {q:'経',a:'へる'}, {q:'継',a:'つぐ'}, {q:'続',a:'つづく'}, 
                        {q:'維',a:'い'}, {q:'綱',a:'つな'}, {q:'網',a:'あみ'}, {q:'緊',a:'きん'}, {q:'緒',a:'お'}, 
                        {q:'線',a:'せん'}, {q:'締',a:'しめる'}, {q:'縁',a:'えん'}, {q:'編',a:'あむ'}, {q:'緩',a:'ゆるむ'}, 
                        {q:'緯',a:'い'}, {q:'縦',a:'たて'}, {q:'績',a:'せき'}, {q:'繁',a:'はん'}, {q:'繰',a:'くる'}, 
                        {q:'繃',a:'ほう'}, {q:'縫',a:'ぬう'}, {q:'縮',a:'ちぢむ'}, {q:'繚',a:'りょう'}, {q:'繹',a:'えき'}, 
                        {q:'織',a:'おる'}, {q:'繕',a:'つくろう'}, {q:'繭',a:'まゆ'}, {q:'翻',a:'ほん'}, {q:'纜',a:'ともづな'}, 
                        {q:'罪',a:'つみ'}, {q:'置',a:'おく'}, {q:'罰',a:'ばつ'}, {q:'署',a:'しょ'}, {q:'罷',a:'ひ'}, 
                        {q:'羅',a:'ら'}, {q:'羊',a:'ひつじ'}, {q:'美',a:'うつくしい'}, {q:'羔',a:'こう'}, {q:'羚',a:'れい'}, 
                        {q:'群',a:'むれる'}, {q:'羨',a:'うらやむ'}, {q:'義',a:'ぎ'}, {q:'羽',a:'はね'}, {q:'翁',a:'おう'}, 
                        {q:'翅',a:'し'}, {q:'翌',a:'よく'}, {q:'習',a:'ならう'}, {q:'翔',a:'しょう'}, {q:'翠',a:'すい'}, 
                        {q:'翡',a:'ひ'}, {q:'翻',a:'ほん'}, {q:'翼',a:'つばさ'}, {q:'老',a:'おいる'}, {q:'考',a:'かんがえる'}, 
                        {q:'者',a:'もの'}, {q:'耆',a:'き'}, {q:'耇',a:'こう'}, {q:'耐',a:'たえる'}, {q:'耗',a:'こう'}, 
                        {q:'耳',a:'みみ'}, {q:'聖',a:'せい'}, {q:'聞',a:'きく'}, {q:'粛',a:'しゅく'}, {q:'聴',a:'きく'}, 
                        {q:'聿',a:'いつ'}, {q:'肄',a:'い'}, {q:'肆',a:'し'}, {q:'肅',a:'しゅく'}, {q:'肉',a:'にく'}, 
                        {q:'肌',a:'はだ'}, {q:'肯',a:'こう'}, {q:'肱',a:'こう'}, {q:'育',a:'そだてる'}, {q:'肴',a:'さかな'}, 
                        {q:'肺',a:'はい'}, {q:'肢',a:'し'}, {q:'肥',a:'こえる'}, {q:'肩',a:'かた'}, {q:'肪',a:'ぼう'}, 
                        {q:'胆',a:'たん'}, {q:'胎',a:'たい'}, {q:'胞',a:'ほう'}, {q:'胴',a:'どう'}, {q:'胸',a:'むね'}, 
                        {q:'脅',a:'おびやかす'}, {q:'脇',a:'わき'}, {q:'脈',a:'みゃく'}, {q:'脚',a:'あし'}, {q:'脱',a:'ぬぐ'}, 
                        {q:'脹',a:'ちょう'}, {q:'脾',a:'ひ'}, {q:'腑',a:'ふ'}, {q:'腕',a:'うで'}, {q:'腫',a:'はれる'}, 
                        {q:'腺',a:'せん'}, {q:'腰',a:'こし'}, {q:'腸',a:'ちょう'}, {q:'腹',a:'はら'}, {q:'膜',a:'まく'}, 
                        {q:'膝',a:'ひざ'}, {q:'膨',a:'ふくらむ'}, {q:'膳',a:'ぜん'}, {q:'膠',a:'こう'}, {q:'臆',a:'おく'}, 
                        {q:'謄',a:'とう'}, {q:'膚',a:'ふ'}, {q:'臣',a:'しん'}, {q:'臥',a:'が'}, {q:'臧',a:'ぞう'}, 
                        {q:'臨',a:'のぞむ'}, {q:'自',a:'みずから'}, {q:'臭',a:'くさい'}, {q:'至',a:'いたる'}, {q:'致',a:'いたす'}, 
                        {q:'臺',a:'だい'}, {q:'臻',a:'しん'}, {q:'臼',a:'うす'}, {q:'舅',a:'きゅう'}, {q:'與',a:'あたえる'}, 
                        {q:'興',a:'おこる'}, {q:'舉',a:'あげる'}, {q:'舊',a:'ふるい'}, {q:'舌',a:'した'}, {q:'舎',a:'しゃ'}, 
                        {q:'舗',a:'ほ'}, {q:'舜',a:'しゅん'}, {q:'舞',a:'まう'}, {q:'般',a:'はん'}, {q:'舵',a:'かじ'}, 
                        {q:'舶',a:'はく'}, {q:'舷',a:'げん'}, {q:'船',a:'ふね'}, {q:'艇',a:'てい'}, {q:'艦',a:'かん'}, 
                        {q:'艮',a:'ごん'}, {q:'良',a:'よい'}, {q:'艱',a:'かん'}, {q:'色',a:'いろ'}, {q:'艶',a:'つや'}, 
                        {q:'芋',a:'いも'}, {q:'芍',a:'しゃく'}, {q:'芒',a:'ぼう'}, {q:'芙',a:'ふ'}, {q:'芥',a:'かい'}, 
                        {q:'芹',a:'せり'}, {q:'苑',a:'えん'}, {q:'苒',a:'ぜん'}, {q:'苔',a:'こけ'}, {q:'苗',a:'なえ'}, 
                        {q:'苙',a:'りゅう'}, {q:'苛',a:'か'}, {q:'茲',a:'ここ'}, {q:'茁',a:'ちゅつ'}, {q:'苞',a:'ほう'}, 
                        {q:'苟',a:'こう'}, {q:'若',a:'わかい'}, {q:'茂',a:'しげる'}, {q:'苑',a:'えん'}, {q:'繭',a:'まゆ'}, 
                        {q:'茫',a:'ぼう'}, {q:'茗',a:'みょう'}, {q:'茨',a:'いばら'}, {q:'茜',a:'あかね'}, {q:'莞',a:'かん'}
                        // ... 更多 AI 生成的漢字 ...
                    ] // 不再使用 .slice()
                },
                'g8': { // 中學2年生 (399 字)
                    name: '中学2年生<small>(全 399 字)</small>', 
                    data: [
                        // 請在此處填入您核對過的 399 個中二漢字和讀音
                        // 以下為 AI 生成的範例，*需要核對修正*
                        {q:'茎',a:'くき'}, {q:'荘',a:'そう'}, {q:'茶',a:'ちゃ'}, {q:'茲',a:'ここ'}, {q:'勇',a:'いさむ'}, 
                        {q:'茫',a:'ぼう'}, {q:'莢',a:'さや'}, {q:'莖',a:'くき'}, {q:'莧',a:'かん'}, {q:'莫',a:'ばく'}, 
                        {q:'莱',a:'らい'}, {q:'菅',a:'かん'}, {q:'菁',a:'せい'}, {q:'菊',a:'きく'}, {q:'菌',a:'きん'}, 
                        {q:'菓',a:'か'}, {q:'菖',a:'しょう'}, {q:'菩',a:'ぼ'}, {q:'萌',a:'もえる'}, {q:'菜',a:'な'}, 
                        {q:'菟',a:'と'}, {q:'華',a:'はな'}, {q:'菰',a:'こも'}, {q:'菱',a:'ひし'}, {q:'菲',a:'ひ'}, 
                        {q:'萄',a:'とう'}, {q:'萊',a:'らい'}, {q:'萍',a:'へい'}, {q:'萎',a:'しぼむ'}, {q:'著',a:'ちょ'}, 
                        {q:'蒐',a:'しゅう'}, {q:'萩',a:'はぎ'}, {q:'董',a:'とう'}, {q:'萬',a:'まん'}, {q:'葦',a:'あし'}, 
                        {q:'落',a:'おちる'}, {q:'葱',a:'ねぎ'}, {q:'葵',a:'あおい'}, {q:'蒙',a:'もう'}, {q:'蒜',a:'さん'}, 
                        {q:'蒟',a:'こん'}, {q:'蒻',a:'にゃく'}, {q:'蒿',a:'こう'}, {q:'蓆',a:'むしろ'}, {q:'藍',a:'あい'}, 
                        {q:'㭂',a:'せん'}, {q:'蕪',a:'かぶ'}, {q:'蕃',a:'ばん'}, {q:'蕉',a:'しょう'}, {q:'蕊',a:'ずい'}, 
                        {q:'蕎',a:'きょう'}, {q:'蕩',a:'とう'}, {q:'蔕',a:'たい'}, {q:'蕀',a:'か'}, {q:'蕾',a:'つぼみ'}, 
                        {q:'薀',a:'うん'}, {q:'薇',a:'び'}, {q:'薈',a:'かい'}, {q:'薊',a:'あざみ'}, {q:'薑',a:'きょう'}, 
                        {q:'薔',a:'しょう'}, {q:'薗',a:'その'}, {q:'薙',a:'なぎ'}, {q:'薛',a:'せつ'}, {q:'薦',a:'すすめる'}, 
                        {q:'薨',a:'こう'}, {q:'薩',a:'さつ'}, {q:'薪',a:'たきぎ'}, {q:'薫',a:'かおる'}, {q:'薬',a:'くすり'}, 
                        {q:'薮',a:'やぶ'}, {q:'薯',a:'しょ'}, {q:'藷',a:'しょ'}, {q:'藹',a:'あい'}, {q:'藺',a:'い'}, 
                        {q:'藻',a:'も'}, {q:'蘆',a:'ろ'}, {q:'蘇',a:'そ'}, {q:'蘊',a:'うん'}, {q:'蘋',a:'ひん'}, 
                        {q:'蘂',a:'ずい'}, {q:'蘖',a:'げつ'}, {q:'蘗',a:'げつ'}, {q:'蘚',a:'せん'}, {q:'蘭',a:'らん'}, 
                        {q:'虎',a:'とら'}, {q:'虐',a:'ぎゃく'}, {q:'虔',a:'けん'}, {q:'虚',a:'きょ'}, {q:'虜',a:'りょ'}, 
                        {q:'虞',a:'おそれ'}, {q:'號',a:'ごう'}, {q:'虧',a:'き'}, {q:'虱',a:'しらみ'}, {q:'虹',a:'にじ'}, 
                        {q:'虻',a:'あぶ'}, {q:'蚃',a:'こう'}, {q:'蚋',a:'ぶゆ'}, {q:'蚊',a:'か'}, {q:'蚪',a:'と'}, 
                        {q:'蚓',a:'いん'}, {q:'蚕',a:'かいこ'}, {q:'蚩',a:'し'}, {q:'蛇',a:'へび'}, {q:'蛋',a:'たん'}, 
                        {q:'蛍',a:'ほたる'}, {q:'蛎',a:'れい'}, {q:'蛄',a:'こ'}, {q:'蚵',a:'か'}, {q:'蚰',a:'ゆう'}, 
                        {q:'蚶',a:'かん'}, {q:'蛄',a:'こ'}, {q:'蛆',a:'うじ'}, {q:'蚫',a:'ほう'}, {q:'蛉',a:'れい'}, 
                        {q:'蚯',a:'きゅう'}, {q:'蚓',a:'いん'}, {q:'蚣',a:'こう'}, {q:'蚩',a:'し'}, {q:'蚪',a:'と'}, 
                        {q:'蚊',a:'か'}, {q:'蚝',a:'こう'}, {q:'蚴',a:'よう'}, {q:'蚱',a:'さく'}, {q:'蚸',a:'ちつ'}, 
                        {q:'蚹',a:'ふ'}, {q:'蚺',a:'ぜん'}, {q:'蛻',a:'ぜい'}, {q:'蛅',a:'てつ'}, {q:'蛌',a:'しゅん'}, 
                        {q:'蜍',a:'しょ'}, {q:'蛸',a:'たこ'}, {q:'蛹',a:'よう'}, {q:'蛣',a:'きつ'}, {q:'蛻',a:'ぜい'}, 
                        {q:'蛾',a:'が'}, {q:'蜀',a:'しょく'}, {q:'蜂',a:'はち'}, {q:'蜃',a:'しん'}, {q:'蜆',a:'しじみ'}, 
                        {q:'蜈',a:'ご'}, {q:'蚣',a:'こう'}, {q:'蜉',a:'ふ'}, {q:'蝣',a:'ゆう'}, {q:'蜩',a:'ひぐらし'}, 
                        {q:'蛻',a:'ぜい'}, {q:'蜑',a:'たん'}, {q:'蜒',a:'えん'}, {q:'蜓',a:'てい'}, {q:'蜘',a:'ち'}, 
                        {q:'蜾',a:'か'}, {q:'蜑',a:'たん'}, {q:'蝕',a:'しょく'}, {q:'蜥',a:'せき'}, {q:'蜴',a:'えき'}, 
                        {q:'蜚',a:'ひ'}, {q:'蜜',a:'みつ'}, {q:'蜞',a:'き'}, {q:'蝋',a:'ろう'}, {q:'蜻',a:'せい'}, 
                        {q:'蜮',a:'よく'}, {q:'蜷',a:'にな'}, {q:'蜘',a:'ち'}, {q:'蝕',a:'しょく'}, {q:'蝉',a:'せみ'}, 
                        {q:'蝋',a:'ろう'}, {q:'蝌',a:'か'}, {q:'蝎',a:'かつ'}, {q:'蝓',a:'ゆ'}, {q:'蝕',a:'しょく'}, 
                        {q:'蝗',a:'いなご'}, {q:'蝙',a:'へん'}, {q:'蝠',a:'ふく'}, {q:'蝣',a:'ゆう'}, {q:'蝨',a:'しらみ'}, 
                        {q:'蝮',a:'ふく'}, {q:'蝰',a:'き'}, {q:'螻',a:'ろう'}, {q:'蟇',a:'ひき'}, {q:'蟄',a:'ちつ'}, 
                        {q:'螳',a:'とう'}, {q:'螂',a:'ろう'}, {q:'螺',a:'ら'}, {q:'螻',a:'ろう'}, {q:'蟯',a:'じょう'}, 
                        {q:'蟀',a:'しゅつ'}, {q:'蟄',a:'ちつ'}, {q:'蟋',a:'しつ'}, {q:'蟀',a:'しゅつ'}, {q:'蟷',a:'とう'}, 
                        {q:'螂',a:'ろう'}, {q:'蟎',a:'まん'}, {q:'蠎',a:'うわばみ'}, {q:'蟹',a:'かに'}, {q:'蟾',a:'せん'}, 
                        {q:'蜍',a:'しょ'}, {q:'蠏',a:'かい'}, {q:'蠑',a:'えい'}, {q:'螈',a:'げん'}, {q:'蠔',a:'ごう'}, 
                        {q:'蠕',a:'ぜん'}, {q:'蠢',a:'しゅん'}, {q:'蠡',a:'れい'}, {q:'蠢',a:'しゅん'}, {q:'蠱',a:'こ'}, 
                        {q:'蠶',a:'かいこ'}, {q:'蠹',a:'と'}, {q:'蠻',a:'ばん'}, {q:'衆',a:'しゅう'}, {q:'衍',a:'えん'}, 
                        {q:'衒',a:'げん'}, {q:'術',a:'じゅつ'}, {q:'街',a:'まち'}, {q:'衙',a:'が'}, {q:'衝',a:'しょう'}, 
                        {q:'衛',a:'えい'}, {q:'衡',a:'こう'}, {q:'衢',a:'く'}, {q:'衣',a:'ころも'}, {q:'衫',a:'さん'}, 
                        {q:'袁',a:'えん'}, {q:'袂',a:'たもと'}, {q:'衽',a:'じん'}, {q:'衿',a:'えり'}, {q:'袈',a:'けさ'}, 
                        {q:'裟',a:'さ'}, {q:'裙',a:'くん'}, {q:'袱',a:'ふく'}, {q:'裃',a:'かみしも'}, {q:'裄',a:'ゆき'}, 
                        {q:'裔',a:'えい'}, {q:'裘',a:'きゅう'}, {q:'裙',a:'くん'}, {q:'裟',a:'さ'}, {q:'裨',a:'ひ'}, 
                        {q:'裲',a:'りょう'}, {q:'裊',a:'じょう'}, {q:'裎',a:'てい'}, {q:'裸',a:'はだか'}, {q:'製',a:'せい'}, 
                        {q:'裾',a:'すそ'}, {q:'褂',a:'か'}, {q:'複',a:'ふく'}, {q:'褊',a:'へん'}, {q:'褐',a:'かつ'}, 
                        {q:'褒',a:'ほめる'}, {q:'褓',a:'ほう'}, {q:'褞',a:'うん'}, {q:'褥',a:'じょく'}, {q:'褪',a:'あせる'}, 
                        {q:'褫',a:'ち'}, {q:'襁',a:'きょう'}, {q:'襄',a:'じょう'}, {q:'褻',a:'けがれる'}, {q:'褶',a:'しゅう'}, 
                        {q:'褸',a:'ろう'}, {q:'褻',a:'けがれる'}, {q:'襁',a:'きょう'}, {q:'襃',a:'ほめる'}, {q:'襌',a:'ぜん'}, 
                        {q:'襖',a:'ふすま'}, {q:'襦',a:'じゅ'}, {q:'襤',a:'らん'}, {q:'襪',a:'べつ'}, {q:'襯',a:'しん'}, 
                        {q:'襲',a:'おそう'}, {q:'襴',a:'らん'}, {q:'襠',a:'とう'}, {q:'襞',a:'ひだ'}, {q:'襦',a:'じゅ'}, 
                        {q:'襾',a:'あ'}, {q:'覃',a:'たん'}, {q:'覆',a:'おおう'}, {q:'覇',a:'は'}, {q:'覈',a:'かく'}, 
                        {q:'覊',a:'き'}, {q:'覩',a:'と'}, {q:'見',a:'みる'}, {q:'規',a:'き'}, {q:'覓',a:'べき'}, 
                        {q:'覘',a:'てん'}, {q:'視',a:'し'}, {q:'覡',a:'げき'}, {q:'覗',a:'のぞく'}, {q:'覚',a:'おぼえる'}, 
                        {q:'覧',a:'らん'}, {q:'親',a:'おや'}, {q:'覿',a:'てき'}, {q:'観',a:'かん'}, {q:'角',a:'つの'}, 
                        {q:'觚',a:'こ'}, {q:'觜',a:'し'}, {q:'觝',a:'てい'}, {q:'觧',a:'げ'}, {q:'觴',a:'しょう'}, 
                        {q:'觸',a:'ふれる'}, {q:'言',a:'いう'}, {q:'訂',a:'てい'}, {q:'訃',a:'ふ'}, {q:'計',a:'はかる'}, 
                        {q:'訊',a:'じん'}, {q:'討',a:'うつ'}, {q:'訓',a:'くん'}, {q:'託',a:'たく'}, {q:'訟',a:'しょう'}, 
                        {q:'訛',a:'か'}, {q:'訝',a:'が'}, {q:'訥',a:'とつ'}, {q:'訶',a:'か'}, {q:'詁',a:'こ'}
                        // ... 更多 AI 生成的漢字 ...
                    ] // 不再使用 .slice()
                },
                'g9': { // 中學3年生 (394 字)
                    name: '中学3年生<small>(全 394 字)</small>', 
                    data: [
                        // 請在此處填入您核對過的 394 個中三漢字和讀音
                        // 以下為 AI 生成的範例，*需要核對修正*
                        {q:'詠',a:'えい'}, {q:'詢',a:'じゅん'}, {q:'試',a:'ためす'}, {q:'詩',a:'し'}, {q:'詫',a:'わびる'}, 
                        {q:'詬',a:'こう'}, {q:'詭',a:'き'}, {q:'詮',a:'せん'}, {q:'詰',a:'つめる'}, {q:'話',a:'はなす'}, 
                        {q:'該',a:'がい'}, {q:'詳',a:'しょう'}, {q:'詹',a:'せん'}, {q:'詼',a:'かい'}, {q:'詿',a:'けい'}, 
                        {q:'誉',a:'ほまれ'}, {q:'誊',a:'よう'}, {q:'誠',a:'まこと'}, {q:'誌',a:'し'}, {q:'認',a:'みとめる'}, 
                        {q:'誓',a:'ちかう'}, {q:'誕',a:'たん'}, {q:'誘',a:'さそう'}, {q:'語',a:'かたる'}, {q:'誠',a:'まこと'}, 
                        {q:'誡',a:'いましめる'}, {q:'誣',a:'ふ'}, {q:'誤',a:'あやまる'}, {q:'誦',a:'しょう'}, {q:'説',a:'とく'}, 
                        {q:'読',a:'よむ'}, {q:'誰',a:'だれ'}, {q:'課',a:'か'}, {q:'誹',a:'ひ'}, {q:'誼',a:'ぎ'}, 
                        {q:'調',a:'しらべる'}, {q:'諍',a:'そう'}, {q:'談',a:'だん'}, {q:'諚',a:'じょう'}, {q:'諠',a:'けん'}, 
                        {q:'諤',a:'がく'}, {q:'諦',a:'あきらめる'}, {q:'諧',a:'かい'}, {q:'諫',a:'いさめる'}, {q:'諭',a:'さとす'}, 
                        {q:'諮',a:'はかる'}, {q:'諾',a:'だく'}, {q:'謀',a:'はかる'}, {q:'謁',a:'えつ'}, {q:'謂',a:'いう'}, 
                        {q:'謄',a:'とう'}, {q:'謎',a:'なぞ'}, {q:'謙',a:'けん'}, {q:'謚',a:'し'}, {q:'講',a:'こう'}, 
                        {q:'謝',a:'あやまる'}, {q:'謡',a:'うたい'}, {q:'謠',a:'よう'}, {q:'謨',a:'ぼ'}, {q:'謬',a:'びゅう'}, 
                        {q:'謳',a:'おう'}, {q:'謹',a:'つつしむ'}, {q:'譎',a:'けつ'}, {q:'譏',a:'き'}, {q:'識',a:'しき'}, 
                        {q:'譜',a:'ふ'}, {q:'警',a:'けい'}, {q:'譬',a:'たとえる'}, {q:'譯',a:'やく'}, {q:'議',a:'ぎ'}, 
                        {q:'譲',a:'ゆずる'}, {q:'譴',a:'けん'}, {q:'護',a:'まもる'}, {q:'譽',a:'ほまれ'}, {q:'讎',a:'しゅう'}, 
                        {q:'讀',a:'よむ'}, {q:'讃',a:'さん'}, {q:'變',a:'へん'}, {q:'讒',a:'ざん'}, {q:'讓',a:'ゆずる'}, 
                        {q:'讖',a:'せん'}, {q:'谷',a:'たに'}, {q:'豆',a:'まめ'}, {q:'豊',a:'ゆたか'}, {q:'豌',a:'えん'}, 
                        {q:'豚',a:'ぶた'}, {q:'象',a:'ぞう'}, {q:'豢',a:'かん'}, {q:'豪',a:'ごう'}, {q:'豫',a:'よ'}, 
                        {q:'豬',a:'ちょ'}, {q:'豸',a:'ち'}, {q:'豹',a:'ひょう'}, {q:'豺',a:'さい'}, {q:'貂',a:'てん'}, 
                        {q:'貅',a:'きゅう'}, {q:'貉',a:'かく'}, {q:'貌',a:'ぼう'}, {q:'貊',a:'はく'}, {q:'貌',a:'ぼう'}, 
                        {q:'貍',a:'り'}, {q:'貎',a:'げい'}, {q:'貔',a:'ひ'}, {q:'貅',a:'きゅう'}, {q:'貘',a:'ばく'}, 
                        {q:'貝',a:'かい'}, {q:'貞',a:'てい'}, {q:'財',a:'ざい'}, {q:'貢',a:'こう'}, {q:'貧',a:'まずしい'}, 
                        {q:'貨',a:'か'}, {q:'販',a:'はん'}, {q:'貪',a:'どん'}, {q:'貫',a:'つらぬく'}, {q:'責',a:'せめる'}, 
                        {q:'貯',a:'ちょ'}, {q:'貰',a:'もらう'}, {q:'貴',a:'とうとい'}, {q:'貶',a:'へん'}, {q:'買',a:'かう'}, 
                        {q:'貸',a:'かす'}, {q:'費',a:'ひ'}, {q:'貼',a:'はる'}, {q:'貽',a:'い'}, {q:'貿',a:'ぼう'}, 
                        {q:'賀',a:'が'}, {q:'賂',a:'ろ'}, {q:'賃',a:'ちん'}, {q:'賄',a:'まかなう'}, {q:'資',a:'し'}, 
                        {q:'賊',a:'ぞく'}, {q:'賓',a:'ひん'}, {q:'賑',a:'にぎわう'}, {q:'賛',a:'さん'}, {q:'賜',a:'たまわる'}, 
                        {q:'賞',a:'しょう'}, {q:'賠',a:'ばい'}, {q:'賢',a:'かしこい'}, {q:'賣',a:'うる'}, {q:'賤',a:'いやしい'}, 
                        {q:'賦',a:'ふ'}, {q:'質',a:'しつ'}, {q:'賭',a:'かける'}, {q:'購',a:'こう'}, {q:'賽',a:'さい'}, 
                        {q:'賎',a:'いやしい'}, {q:'賍',a:'ぞう'}, {q:'賺',a:'たん'}, {q:'贄',a:'し'}, {q:'贅',a:'ぜい'}, 
                        {q:'贈',a:'おくる'}, {q:'贇',a:'いん'}, {q:'贊',a:'さん'}, {q:'贋',a:'にせ'}, {q:'贍',a:'せん'}, 
                        {q:'贏',a:'えい'}, {q:'赤',a:'あか'}, {q:'赦',a:'しゃ'}, {q:'赧',a:'たん'}, {q:'赫',a:'かく'}, 
                        {q:'赭',a:'しゃ'}, {q:'走',a:'はしる'}, {q:'赳',a:'きゅう'}, {q:'赴',a:'おもむく'}, {q:'起',a:'おきる'}, 
                        {q:'趁',a:'ちん'}, {q:'超',a:'こえる'}, {q:'越',a:'こえる'}, {q:'趙',a:'ちょう'}, {q:'趣',a:'おもむき'}, 
                        {q:'趨',a:'すう'}, {q:'足',a:'あし'}, {q:'趾',a:'し'}, {q:'趺',a:'ふ'}, {q:'跏',a:'か'}, 
                        {q:'跚',a:'さん'}, {q:'跖',a:'せき'}, {q:'跌',a:'てつ'}, {q:'跛',a:'は'}, {q:'跋',a:'ばつ'}, 
                        {q:'跪',a:'ひざまずく'}, {q:'跫',a:'きょう'}, {q:'跟',a:'こん'}, {q:'跣',a:'せん'}, {q:'跤',a:'こう'}, 
                        {q:'跨',a:'またぐ'}, {q:'跪',a:'ひざまずく'}, {q:'跼',a:'きょく'}, {q:'踐',a:'ふむ'}, {q:'踟',a:'ち'}, 
                        {q:'蹂',a:'じゅう'}, {q:'蹄',a:'ひづめ'}, {q:'蹈',a:'ふむ'}, {q:'蹊',a:'けい'}, {q:'蹋',a:'とう'}, 
                        {q:'蹤',a:'しょう'}, {q:'踮',a:'てん'}, {q:'蹟',a:'せき'}, {q:'躇',a:'ちょ'}, {q:'蹤',a:'しょう'}, 
                        {q:'蹠',a:'しょ'}, {q:'蹙',a:'しゅく'}, {q:'蹶',a:'けつ'}, {q:'蹼',a:'ほ'}, {q:'蹲',a:'うずくまる'}, 
                        {q:'蹴',a:'ける'}, {q:'蹶',a:'けつ'}, {q:'蹼',a:'ほ'}, {q:'躁',a:'そう'}, {q:'躇',a:'ちょ'}, 
                        {q:'躅',a:'ちょく'}, {q:'躇',a:'ちょ'}, {q:'躓',a:'つまずく'}, {q:'躑',a:'てき'}, {q:'躅',a:'ちょく'}, 
                        {q:'躊',a:'ちゅう'}, {q:'躇',a:'ちょ'}, {q:'躍',a:'おどる'}, {q:'身',a:'み'}, {q:'躬',a:'きゅう'}, 
                        {q:'躯',a:'く'}, {q:'躲',a:'た'}, {q:'躺',a:'とう'}, {q:'車',a:'くるま'}, {q:'軋',a:'あつ'}, 
                        {q:'軌',a:'き'}, {q:'軍',a:'ぐん'}, {q:'軒',a:'けん'}, {q:'軟',a:'やわらかい'}, {q:'転',a:'ころがる'}, 
                        {q:'軛',a:'くびき'}, {q:'軫',a:'しん'}, {q:'軸',a:'じく'}, {q:'軼',a:'いつ'}, {q:'較',a:'かく'}, 
                        {q:'軾',a:'しょく'}, {q:'載',a:'のせる'}, {q:'輊',a:'ち'}, {q:'輒',a:'ちょう'}, {q:'輔',a:'ほ'}, 
                        {q:'輕',a:'かるい'}, {q:'輛',a:'りょう'}, {q:'輌',a:'りょう'}, {q:'輒',a:'ちょう'}, {q:'輓',a:'ばん'}, 
                        {q:'輔',a:'ほ'}, {q:'輝',a:'かがやく'}, {q:'輥',a:'こん'}, {q:'輜',a:'し'}, {q:'輟',a:'てつ'}, 
                        {q:'輩',a:'はい'}, {q:'輪',a:'わ'}, {q:'輯',a:'しゅう'}, {q:'輳',a:'そう'}, {q:'輸',a:'ゆ'}, 
                        {q:'輻',a:'ふく'}, {q:'輾',a:'てん'}, {q:'輿',a:'よ'}, {q:'轄',a:'かつ'}, {q:'輾',a:'てん'}, 
                        {q:'轅',a:'えん'}, {q:'轆',a:'ろく'}, {q:'轉',a:'てん'}, {q:'轍',a:'てつ'}, {q:'轎',a:'きょう'}, 
                        {q:'轌',a:'そり'}, {q:'轟',a:'ごう'}, {q:'轡',a:'くつわ'}, {q:'轢',a:'れき'}, {q:'辛',a:'からい'}, 
                        {q:'辜',a:'こ'}, {q:'辟',a:'へき'}, {q:'辣',a:'らつ'}, {q:'辦',a:'べん'}, {q:'辨',a:'べん'}, 
                        {q:'辭',a:'じ'}, {q:'辰',a:'たつ'}, {q:'辱',a:'はずかしめる'}, {q:'農',a:'のう'}, {q:'迂',a:'う'}, 
                        {q:'迄',a:'まで'}, {q:'迅',a:'じん'}, {q:'迎',a:'むかえる'}, {q:'近',a:'ちかい'}, {q:'返',a:'かえす'}, 
                        {q:'迢',a:'ちょう'}, {q:'迤',a:'い'}, {q:'迥',a:'けい'}, {q:'迦',a:'か'}, {q:'迭',a:'てつ'}, 
                        {q:'述',a:'のべる'}, {q:'迪',a:'てき'}, {q:'迫',a:'せまる'}, {q:'迭',a:'てつ'}, {q:'迸',a:'ほう'}, 
                        {q:'逅',a:'こう'}, {q:'迹',a:'せき'}, {q:'追',a:'おう'}, {q:'這',a:'はう'}, {q:'途',a:'と'}, 
                        {q:'逕',a:'けい'}, {q:'逖',a:'てき'}, {q:'逗',a:'とう'}, {q:'這',a:'はう'}, {q:'逝',a:'ゆく'}, 
                        {q:'逞',a:'たくましい'}, {q:'速',a:'はやい'}, {q:'造',a:'つくる'}, {q:'逡',a:'しゅん'}, {q:'逢',a:'あう'}, 
                        {q:'連',a:'つらなる'}, {q:'逮',a:'たい'}, {q:'週',a:'しゅう'}, {q:'進',a:'すすむ'}, {q:'逵',a:'き'}, 
                        {q:'逶',a:'い'}, {q:'逸',a:'いつ'}, {q:'逼',a:'ひつ'}, {q:'逾',a:'ゆ'}, {q:'遁',a:'とん'}, 
                        {q:'遂',a:'とげる'}, {q:'遄',a:'せん'}, {q:'遇',a:'ぐう'}, {q:'遍',a:'へん'}, {q:'遏',a:'あつ'}, 
                        {q:'遐',a:'か'}, {q:'遑',a:'こう'}, {q:'遒',a:'しゅう'}, {q:'道',a:'みち'}, {q:'達',a:'たつ'}, 
                        {q:'違',a:'ちがう'}, {q:'遜',a:'へりくだる'}, {q:'遊',a:'あそぶ'}, {q:'運',a:'はこぶ'}, {q:'遌',a:'がく'}, 
                        {q:'遍',a:'へん'}, {q:'過',a:'すぎる'}, {q:'遐',a:'か'}, {q:'遑',a:'こう'}, {q:'遒',a:'しゅう'}, 
                        {q:'遙',a:'よう'}, {q:'遜',a:'へりくだる'}, {q:'遞',a:'てい'}, {q:'遠',a:'とおい'}, {q:'遡',a:'さかのぼる'}, 
                        {q:'遣',a:'つかわす'}, {q:'遙',a:'よう'}, {q:'遨',a:'ごう'}, {q:'適',a:'てき'}, {q:'遭',a:'あう'}, 
                        {q:'遮',a:'さえぎる'}, {q:'遲',a:'おくれる'}, {q:'遴',a:'りん'}, {q:'遵',a:'じゅん'}, {q:'遶',a:'にょう'}, 
                        {q:'遷',a:'せん'}, {q:'選',a:'えらぶ'}, {q:'遺',a:'のこす'}, {q:'遼',a:'りょう'}, {q:'遽',a:'きょ'}, 
                        {q:'避',a:'さける'}, {q:'邀',a:'よう'}, {q:'邁',a:'まい'}, {q:'邂',a:'かい'}, {q:'邃',a:'すい'}, 
                        {q:'還',a:'かえる'}, {q:'邇',a:'じ'}, {q:'邈',a:'ばく'}, {q:'邊',a:'へん'}, {q:'邋',a:'ろう'}, 
                        {q:'邏',a:'ら'}, {q:'邑',a:'ゆう'}, {q:'邕',a:'よう'}, {q:'那',a:'な'}, {q:'邸',a:'てい'}
                         // ... 請在此處填入完整的 394 個 G9 漢字 ...
                    ]
                },
                // [V3.7 更新] 擴充常見錯誤數據 (基於用戶圖片)
                'common_errors': {
                    name: 'よくある間違い<small>(読み方中心)</small>',
                    data: [
                        // --- 從圖片 "読み練習問題" 提取 (請校對！) ---
                        {q:'柔軟', a:'じゅうなん'}, 
                        {q:'建立', a:'こんりゅう'}, // 注意: けんりつ も一般的だが資料に合わせる
                        {q:'克服', a:'こくふく'}, 
                        {q:'背丈', a:'せたけ'}, 
                        {q:'戸惑い', a:'とまどい'}, 
                        {q:'幾重', a:'いくえ'}, 
                        {q:'見据え', a:'みすえ'}, 
                        {q:'扱う', a:'あつかう'}, 
                        {q:'柄', a:'がら'}, // 文脈依存あり
                        {q:'乏しい', a:'とぼしい'}, 
                        {q:'柔和', a:'にゅうわ'}, 
                        // {q:'建立', a:'こんりゅう'}, // 重複例
                        {q:'営む', a:'いとなむ'}, // 資料は「営ん」-> いとなん
                        {q:'膨らむ', a:'ふくらむ'}, 
                        {q:'鋭敏', a:'えいびん'}, 
                        {q:'導く', a:'みちびく'}, 
                        {q:'詳細', a:'しょうさい'}, 
                        {q:'頻繁', a:'ひんぱん'}, 
                        {q:'無駄', a:'むだ'}, 
                        {q:'上昇', a:'じょうしょう'}, 
                        {q:'敵陣', a:'てきじん'}, 
                        {q:'吟味', a:'ぎんみ'}, 
                        {q:'退屈', a:'たいくつ'}, 
                        {q:'些細', a:'ささい'}, 
                        {q:'随所', a:'ずいしょ'}, 
                        {q:'優れる', a:'すぐれる'}, // 資料は「優れ」-> すぐれ
                        {q:'到達', a:'とうたつ'}, 
                        {q:'羽化', a:'うか'}, 
                        {q:'薄める', a:'うすめる'}, 
                        {q:'漂う', a:'ただよう'}, 
                        {q:'擬態語', a:'ぎたいご'}, // 資料は「擬態語」だが読みは不明瞭
                        {q:'精神', a:'せいしん'}, 
                        {q:'縁起', a:'えんぎ'}, 
                        {q:'戸惑う', a:'とまどう'}, // 資料は「戸惑って」-> とまどって
                        {q:'秩序', a:'ちつじょ'}, 
                        {q:'排斥', a:'はいせき'}, 
                        {q:'隆盛', a:'りゅうせい'}, 
                        // {q:'退屈', a:'たいくつ'}, // 重複例
                        {q:'企てる', a:'くわだてる'}, 
                        {q:'海苔', a:'のり'}, 
                        {q:'難攻不落', a:'なんこうふらく'}, 
                        {q:'包囲', a:'ほうい'}, 
                        {q:'象徴', a:'しょうちょう'}, 
                        {q:'依頼', a:'いらい'}, 
                        {q:'河川', a:'かせん'}, 
                        {q:'営み', a:'いとなみ'}, 
                        {q:'戸外', a:'こがい'}, 
                        {q:'鮮やか', a:'あざやか'}, 
                        {q:'著しい', a:'いちじるしい'}, // 資料は「著しく」-> いちじるしく
                        {q:'維持', a:'いじ'},
                        // --- 補充 V3.4/3.5 的常見錯誤 ---
                        {q:'雰囲気',a:'ふんいき'}, {q:'挨拶',a:'あいさつ'}, {q:'続柄',a:'つづきがら'}, 
                        {q:'辛辣',a:'しんらつ'}, {q:'脆弱',a:'ぜいじゃく'}, {q:'貼付',a:'ちょうふ'}, 
                        {q:'消耗',a:'しょうもう'}, {q:'重複',a:'ちょうふく'}, 
                        {q:'凡例',a:'はんれい'}, {q:'代替',a:'だいたい'}, {q:'発足',a:'ほっそく'}, 
                        {q:'有無',a:'うむ'}, {q:'一段落',a:'いちだんらく'}, 
                        {q:'依存',a:'いぞん'}, {q:'月極',a:'つきぎめ'},
                        {q:'他人事', a:'ひとごと'}, {q:'相殺', a:'そうさい'}, {q:'出生', a:'しゅっしょう'}, 
                        {q:'早急', a:'さっきゅう'}, {q:'白熱',a:'はくねつ'}
                        // --- 可以根據需要繼續添加 ---
                    ] 
                }
            },

            // --- 2. 遊戲狀態 --- (不變)
            state: { /* ... */ },

            // --- 3. DOM 元素 --- (不變)
            elements: {},

            // --- 4. 初始化 --- (不變)
            init: function() { /* ... */ },

            // --- 5. 事件綁定 --- (不變)
            bindEvents: function() { /* ... */ },

            // --- 6. 核心功能 --- (不變)
            showScreen: function(screenName) { /* ... */ },
            populateGradeButtons: function() { /* ... */ },
            shuffleArray: function(array) { /* ... */ },
            startGame: function(gradeId) { /* ... */ },
            displayQuestion: function() { /* ... */ },
            checkAnswer: function(selectedBtn) { /* ... */ },
            nextQuestion: function() { /* ... */ },
            showEndScreen: function() { /* ... */ }

            // [為簡潔起見，此處省略與 V3.6 版本完全相同的函數實現細節]
            // 您可以從 V3.6 的程式碼中複製 showScreen 到 showEndScreen 的完整函數體
             , state: {
                currentGradeData: [],
                currentQuestions: [],
                score: 0,
                currentQuestionIndex: 0,
                currentGradeId: 'g7', 
                QUESTIONS_PER_GAME: 10 // 每次遊戲的問題數量
            },
             elements: {},
             init: function() {
                const app = document.getElementById('jhs-kanji-quiz-v1');
                if (!app) {
                    console.error("JHS-KQ V1: 頂層容器 #jhs-kanji-quiz-v1 未找到。");
                    return;
                }
                this.elements = {
                    app: app,
                    screens: {
                        start: app.querySelector('#jhs-kq-screen-start'),
                        quiz: app.querySelector('#jhs-kq-screen-quiz'),
                        end: app.querySelector('#jhs-kq-screen-end')
                    },
                    levelGrid: app.querySelector('#jhs-kq-level-grid'), 
                    questionCounter: app.querySelector('#jhs-kq-question-counter'),
                    scoreCounter: app.querySelector('#jhs-kq-score-counter'),
                    questionDisplay: app.querySelector('#jhs-kq-question-display'),
                    optionsGrid: app.querySelector('#jhs-kq-options-grid'),
                    nextBtn: app.querySelector('#jhs-kq-next-btn'),
                    feedbackBox: app.querySelector('#jhs-kq-feedback-box'),
                    feedbackText: app.querySelector('#jhs-kq-feedback-text'),
                    answerReveal: app.querySelector('#jhs-kq-answer-reveal'),
                    finalScore: app.querySelector('#jhs-kq-final-score'),
                    restartBtn: app.querySelector('#jhs-kq-restart-btn'),
                    menuBtn: app.querySelector('#jhs-kq-menu-btn')
                };

                if (!this.elements.levelGrid) {
                     console.error("JHS-KQ V1: 學年按鈕容器 #jhs-kq-level-grid 未找到，無法啟動。");
                     if (app) {
                         app.innerHTML = '<p style="color: red; text-align: center;">エラー: UIコンポーネントの読み込みに失敗しました (level grid missing)。</p>';
                     }
                     return;
                }
                
                this.bindEvents();
                this.populateGradeButtons(); 
            },
             bindEvents: function() {
                 if (this.elements.levelGrid) {
                    this.elements.levelGrid.addEventListener('click', (e) => {
                        const levelBtn = e.target.closest('.jhs-kq-level-btn');
                        if (levelBtn && levelBtn.dataset.grade) { 
                            this.startGame(levelBtn.dataset.grade);
                        }
                    });
                }
                if (this.elements.optionsGrid) {
                    this.elements.optionsGrid.addEventListener('click', (e) => {
                        const optionBtn = e.target.closest('.jhs-kq-option-btn');
                        if (optionBtn && !optionBtn.disabled) {
                            this.checkAnswer(optionBtn);
                        }
                    });
                }
                if (this.elements.nextBtn) {
                    this.elements.nextBtn.addEventListener('click', () => this.nextQuestion());
                }
                if (this.elements.restartBtn) {
                    this.elements.restartBtn.addEventListener('click', () => this.startGame(this.state.currentGradeId)); 
                }
                if (this.elements.menuBtn) {
                    this.elements.menuBtn.addEventListener('click', () => this.showScreen('start'));
                }
            },
             showScreen: function(screenName) {
                if (!this.elements.screens || !this.elements.screens[screenName]) {
                    console.error(`JHS-KQ V1: 嘗試顯示不存在的畫面: ${screenName}`);
                    return;
                }
                for (let key in this.elements.screens) {
                    if (this.elements.screens[key]) { 
                        this.elements.screens[key].classList.remove('active');
                    }
                }
                this.elements.screens[screenName].classList.add('active');
            },
            populateGradeButtons: function() {
                if (!this.elements.levelGrid) {
                    console.error("JHS-KQ V1: populateGradeButtons - levelGrid 元素不存在。");
                    return;
                }
                this.elements.levelGrid.innerHTML = '';
                for (const [gradeId, gradeInfo] of Object.entries(this.quizData)) {
                    const btn = document.createElement('button');
                    btn.className = 'jhs-kq-level-btn';
                    btn.dataset.grade = gradeId; 
                    btn.innerHTML = gradeInfo.name; 
                    this.elements.levelGrid.appendChild(btn);
                }
            },
             shuffleArray: function(array) {
                let currentIndex = array.length, randomIndex;
                while (currentIndex > 0) {
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex--;
                    [array[currentIndex], array[randomIndex]] = [
                        array[randomIndex], array[currentIndex]];
                }
                return array;
            },
            startGame: function(gradeId) {
                if (!this.quizData[gradeId] || !this.quizData[gradeId].data || this.quizData[gradeId].data.length === 0) {
                    console.error(`JHS-KQ V1: 找不到 ${gradeId} 的數據或數據為空。`);
                     this.showScreen('start'); 
                    return;
                }
                 if (!this.elements.screens.quiz || !this.elements.questionDisplay || !this.elements.optionsGrid) {
                     console.error("JHS-KQ V1: 測驗畫面元素不完整，無法開始遊戲。");
                     this.showScreen('start'); 
                     return;
                 }

                this.state.currentGradeId = gradeId; 
                this.state.currentGradeData = this.quizData[gradeId].data; 
                this.state.score = 0;
                this.state.currentQuestionIndex = 0;
                
                // 重置/獲取每次遊戲的問題數量
                const originalQuestionsPerGame = 10; // 預設值
                let currentDataLength = this.state.currentGradeData.length;
                this.state.QUESTIONS_PER_GAME = Math.min(originalQuestionsPerGame, currentDataLength); // 如果數據不足10, 則只測現有的數量


                // 準備問題 
                 let questionsPool = [...this.state.currentGradeData];
                 // 如果數據少於所需問題數，允許重複 
                 while (questionsPool.length < this.state.QUESTIONS_PER_GAME && questionsPool.length > 0 && currentDataLength > 0) {
                     // 為了避免無限循環，只重複一次原始數據
                     if (questionsPool.length <= currentDataLength * 2) {
                          questionsPool.push(...this.state.currentGradeData);
                     } else {
                         break; 
                     }
                 }
                 
                 // 如果 questionsPool 仍然為空 (理論上不會發生，因為前面有檢查)
                 if (questionsPool.length === 0) {
                      console.error(`JHS-KQ V1: ${gradeId} 數據庫為空，無法開始遊戲。`);
                      this.showScreen('start');
                      return;
                 }


                this.state.currentQuestions = this.shuffleArray(questionsPool).slice(0, this.state.QUESTIONS_PER_GAME); // 使用更新後的數量
                
                // 再次檢查是否有題目生成
                if(this.state.currentQuestions.length === 0){
                     console.error(`JHS-KQ V1: 未能為 ${gradeId} 生成任何題目。`);
                     this.showScreen('start');
                     return;
                }

                this.showScreen('quiz');
                this.displayQuestion();
            },
             displayQuestion: function() {
                 if (!this.elements.feedbackBox || !this.elements.nextBtn || !this.elements.questionCounter || !this.elements.scoreCounter || !this.elements.questionDisplay || !this.elements.optionsGrid) {
                     console.error("JHS-KQ V1: displayQuestion - 缺少必要的 UI 元素。");
                     return;
                 }
                this.elements.feedbackBox.style.display = 'none';
                this.elements.nextBtn.style.display = 'none';
                
                // 確保索引有效
                if(this.state.currentQuestionIndex >= this.state.currentQuestions.length){
                    console.error("JHS-KQ V1: displayQuestion - 無效的問題索引。");
                    this.showEndScreen(); 
                    return;
                }

                const q = this.state.currentQuestions[this.state.currentQuestionIndex];
                
                 if(!q || !q.q || typeof q.a === 'undefined'){ // 檢查 q.a 是否存在 (允許空字串但不允許 undefined)
                      console.error("JHS-KQ V1: displayQuestion - 當前問題數據無效。", q);
                      this.nextQuestion(); 
                      return;
                 }


                this.elements.questionCounter.textContent = `問題 ${this.state.currentQuestionIndex + 1} / ${this.state.QUESTIONS_PER_GAME}`;
                this.elements.scoreCounter.textContent = `スコア: ${this.state.score}`;
                this.elements.questionDisplay.textContent = q.q;
                
                const correctAnswer = q.a;
                let fakes = [];
                
                let allJhsKanji = [];
                 Object.values(this.quizData).forEach(grade => {
                     if (grade && grade.data && Array.isArray(grade.data)) {
                         allJhsKanji.push(...grade.data);
                     }
                 });
                 
                if(allJhsKanji.length === 0){
                    console.error("JHS-KQ V1: displayQuestion - 無法獲取任何漢字數據來生成 fake 選項。");
                    fakes = ['ダミー1', 'ダミー2', 'ダミー3']; 
                } else {
                     // 確保 item 和 item.a 存在
                    const fakePool = allJhsKanji.filter(item => item && typeof item.a !== 'undefined' && item.a !== correctAnswer); 
                    this.shuffleArray(fakePool);
                    fakes = fakePool.slice(0, 3).map(item => item.a); // item.a 已經在 filter 確保存在

                     // 確保 fake 選項有 3 個
                     const defaultFakeSource = (this.quizData['g7']?.data || []).filter(item => item && typeof item.a !== 'undefined' && item.a !== correctAnswer); 
                     this.shuffleArray(defaultFakeSource);
                     let fakeIndex = 0;
                     while(fakes.length < 3 && fakeIndex < defaultFakeSource.length){
                         const fakeReading = defaultFakeSource[fakeIndex]?.a;
                          // 確保 fakeReading 存在且不重複
                         if(typeof fakeReading !== 'undefined' && !fakes.includes(fakeReading)){ 
                             fakes.push(fakeReading);
                         }
                         fakeIndex++;
                     }
                     while(fakes.length < 3){
                           // 提供一個更可靠的備用假答案
                          const backupFake = defaultFakeSource[0]?.a ?? ('ダミー' + (fakes.length + 1)); 
                          // 避免將 correctAnswer 加入 fakes
                          if (backupFake !== correctAnswer && !fakes.includes(backupFake)) {
                               fakes.push(backupFake);
                          } else {
                               // 如果連備用都重複或等於答案，生成一個真正隨機的假名串（雖然不太理想）
                               fakes.push('ダミー' + Math.random().toString(36).substring(7));
                          }
                     }
                }
                
                // 再次確保 fakes 陣列長度為 3
                 fakes = fakes.slice(0, 3);
                 while(fakes.length < 3) {
                     fakes.push('予備' + (fakes.length + 1)); // 添加備用假選項
                 }


                const options = this.shuffleArray([correctAnswer, ...fakes]);

                this.elements.optionsGrid.innerHTML = '';
                options.forEach(optionText => {
                    const btn = document.createElement('button');
                    btn.className = 'jhs-kq-option-btn';
                     // 確保 optionText 不是 undefined 或 null
                    btn.textContent = (typeof optionText !== 'undefined' && optionText !== null) ? optionText : '---'; 
                    btn.dataset.answer = (typeof optionText !== 'undefined' && optionText !== null) ? optionText : 'invalid';
                    this.elements.optionsGrid.appendChild(btn);
                });
            },
            checkAnswer: function(selectedBtn) {
                 if (!this.elements.optionsGrid || !this.elements.answerReveal || !this.elements.feedbackBox || !this.elements.feedbackText || !this.elements.scoreCounter || !this.elements.nextBtn) {
                     console.error("JHS-KQ V1: checkAnswer - 缺少必要的 UI 元素。");
                     return;
                 }
                 if(this.state.currentQuestionIndex >= this.state.currentQuestions.length){
                     console.error("JHS-KQ V1: checkAnswer - 無效的問題索引。");
                     return;
                 }

                this.elements.optionsGrid.querySelectorAll('.jhs-kq-option-btn').forEach(btn => {
                    btn.disabled = true;
                });
                const selectedAnswer = selectedBtn.dataset.answer;
                const q = this.state.currentQuestions[this.state.currentQuestionIndex];
                
                 if(!q || !q.q || typeof q.a === 'undefined'){
                      console.error("JHS-KQ V1: checkAnswer - 當前問題數據無效。", q);
                      this.elements.nextBtn.style.display = 'block'; 
                      this.elements.nextBtn.textContent = (this.state.currentQuestionIndex < this.state.QUESTIONS_PER_GAME - 1) ? '次の問題へ' : '結果を見る';
                      return;
                 }

                const correctAnswer = q.a;
                this.elements.answerReveal.textContent = `正解： ${q.q} ( ${q.a} )`;
                this.elements.feedbackBox.style.display = 'block';
                if (selectedAnswer === correctAnswer) {
                    this.state.score++;
                    selectedBtn.classList.add('correct');
                    this.elements.feedbackText.textContent = '正解！';
                    this.elements.feedbackText.className = 'jhs-kq-feedback-text correct';
                } else {
                    selectedBtn.classList.add('wrong');
                    const correctBtn = this.elements.optionsGrid.querySelector(`[data-answer="${correctAnswer}"]`);
                    if (correctBtn) {
                        correctBtn.classList.add('correct');
                    }
                    this.elements.feedbackText.textContent = '不正解...';
                    this.elements.feedbackText.className = 'jhs-kq-feedback-text wrong';
                }
                this.elements.scoreCounter.textContent = `スコア: ${this.state.score}`;
                if (this.state.currentQuestionIndex < this.state.QUESTIONS_PER_GAME - 1) {
                    this.elements.nextBtn.textContent = '次の問題へ';
                } else {
                    this.elements.nextBtn.textContent = '結果を見る';
                }
                this.elements.nextBtn.style.display = 'block';
            },
            nextQuestion: function() {
                this.state.currentQuestionIndex++;
                if (this.state.currentQuestionIndex < this.state.QUESTIONS_PER_GAME) { 
                    this.displayQuestion();
                } else {
                    this.showEndScreen();
                }
            },
            showEndScreen: function() {
                 if (!this.elements.finalScore || !this.elements.screens.end) {
                     console.error("JHS-KQ V1: showEndScreen - 缺少必要的 UI 元素。");
                     return;
                 }
                this.elements.finalScore.textContent = `${this.state.QUESTIONS_PER_GAME}問中 ${this.state.score}問`; 
                this.showScreen('end');
            }


        };

        // 初始化
        JhsKanjiQuiz.init();

    })(); // 結束 IIFE
}); // 結束 DOMContentLoaded
</script>
